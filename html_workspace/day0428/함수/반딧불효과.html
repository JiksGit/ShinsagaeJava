<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        margin: 0px;
      }
      #wrapper {
        height: 900px;
        background-image: url("../../images/반디불/night.jpg");
        background-size: 100% 100%;
        position: relative;
      }
    </style>
    <script src="../../lib/common.js"></script>
    <script>
      let img;
      let a = 0.02;
      let targetX = 600,
        targetY = 700;
      let count = 0; // 반딧불의 위치를 언제 바꿀지를 결정짓는 변수
      function init() {
        img = document.createElement("img");
        img.src = "../../images/반디불/bug.png";
        img.style.width = 40 + "px";
        img.style.position = "absolute";
        img.style.left = 100 + "px";
        img.style.top = 100 + "px";
        // wrapper에 부착
        document.getElementById("wrapper").appendChild(img);
      }
      // 반디불 움직이기.. (수동부터)
      function move() {
        img.style.left =
          parseFloat(img.style.left) +
          a * (targetX - parseFloat(img.style.left)) +
          "px";
        img.style.top =
          parseFloat(img.style.top) +
          a * (targetY - parseFloat(img.style.top)) +
          "px";
      }
      function setPos() {
        targetX = getRandom(1361);
        targetY = getRandom(901);
      }
      function gameLoop() {
        count++;
        if (count % 150 == 0) {
          setPos();
        }
        move();
      }
      addEventListener("load", function () {
        init();
        let wrapper = document.getElementById("wrapper");
        wrapper.addEventListener("mousedown", function () {
          targetX = event.clientX;
          targetY = event.clientY;
        });
        setInterval("gameLoop()", 10);
      });
    </script>
  </head>
  <body>
    <div id="wrapper"></div>
  </body>
</html>
