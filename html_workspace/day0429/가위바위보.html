<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="../../../lib/common.js"></script>
    <style>
      #img1 {
        width: 300px;
      }
      #img2 {
        width: 300px;
      }
    </style>
    <script>
      /*
      배열의 용도: 규칙이 없는 데이터를 규칙화 시킬 수 있다
                  따라서 랜덤 뿐만 아니라, 반복문과 친하다
      현재 이 프로그램의 경우 파일명에 규칙이 하나도 없다..
      따라서 파일명을 규칙있는 배열로 전환하자!!
      */

      let imgArray = new Array(3); // 메모리에 빈 상자 3개를 만들되,
      // 상자들간 서로 엉겨붙어 있게 [][][]
      imgArray[0] = "가위";
      imgArray[1] = "바위";
      imgArray[2] = "보";

      let i1 = 3,
        i2 = 3;
      let img1, img2;
      let text;

      function gawi(n) {
        if (n == 1) {
          i1 = getRandom(imgArray.length);
          let img1 = document.getElementById("img1");
          img1.src = `../../images/${imgArray[i1]}.png`;
        } else {
          i2 = getRandom(imgArray.length);
          img2 = document.getElementById("img2");
          img2.src = `../../images/${imgArray[i2]}.png`;
        }
      }
      function compare() {
        if (
          (i1 == 0 && i2 == 1) ||
          (i1 == 1 && i2 == 2) ||
          (i1 == 2 && i2 == 0)
        ) {
          text.innerText = "레드팀이 이겼습니다!";
          text.style.color = "red";
        } else if (
          (i2 == 0 && i1 == 1) ||
          (i2 == 1 && i1 == 2) ||
          (i2 == 2 && i1 == 0)
        ) {
          text.innerText = "블루팀이 이겼습니다!";
          text.style.color = "blue";
        } else if (i1 == 3 || i2 == 3) {
          text.innerText = "가위바위보를 진행해주세요";
          text.style.color = "green";
        } else {
          text.innerText = "비겼습니다! 다시 가위바위보 하세요!";
          text.style.color = "black";
        }
      }

      addEventListener("load", function () {
        text = document.querySelector("text");
        document
          .getElementById("blue_button")
          .addEventListener("click", function () {
            gawi(1);
          });
        document
          .getElementById("red_button")
          .addEventListener("click", function () {
            gawi(2);
          });
        setInterval("compare()", 10);
      });
    </script>
  </head>
  <body>
    <button id="blue_button" style="background-color: blue">
      블루팀 가위바위보 실행!
    </button>
    <button id="red_button" style="background-color: red">
      레드팀 가위바위보 실행!
    </button>
    <p>
      <img id="img1" />
      <img id="img2" />
    </p>
    <text>가위바위보를 진행해주세요</text>
  </body>
</html>
